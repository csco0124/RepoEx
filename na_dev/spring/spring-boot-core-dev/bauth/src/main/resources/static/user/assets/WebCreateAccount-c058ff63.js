import{u as M,r as s,b as W,j as e,R as Z,d as n,T as L,C as N,B as $,$ as D,c as w}from"./index-98646e71.js";import{R as _,d as H,a as V}from"./index-5bf7952a.js";import{A as J}from"./AppBarGoBack-afc912f2.js";import{c as G,t as K,a as X}from"./authStyle-a2596f0d.js";import{T as C}from"./TextField-214db1cb.js";import{F as Y,I as q,O as Q}from"./OutlinedInput-0b5b8429.js";import{C as A}from"./CardContent-acb39d1a.js";import"./useFormControl-5ac6dc89.js";const pe=()=>{const j=M(),[m,S]=s.useState(""),[u,p]=s.useState(!1),[b,f]=s.useState("이름을 확인해주세요."),[i,v]=s.useState(""),[g,o]=s.useState(!1),[F,l]=s.useState("이메일을 확인해주세요."),[x,I]=s.useState(""),[R,d]=s.useState(!1),[ee,h]=s.useState("비밀번호를 확인해주세요."),[z,ae]=s.useState("false"),[P,y]=s.useState(!1),[T,E]=s.useState(),{AlertError:U}=W(),c=a=>U(a),k=()=>{p(!1),f(""),o(!1),l(""),d(!1),h("")},O=()=>{k();const a=/^[ㄱ-ㅎ|가-힣]+$/,r=/^[A-Za-z0-9]([-_.]?[A-Za-z0-9])*@[A-Za-z0-9]([-_.]?[A-Za-z0-9])*\.[A-Za-z]{2,3}$/;if(!a.test(m)){c("이름은 한글만 가능합니다.");return}if(!r.test(i)){c("이메일 양식을 확인해주세요.");return}if(!P){c("비밀번호를 확인해주세요.");return}B()},B=()=>{const a=new FormData;a.append("username",m),a.append("email",i),a.append("password",x),a.append("using2FA",z),D.post("/public/api/webcreateaccount",a).then(r=>{console.log(r.data),r.data.error==="OK"?(sessionStorage.setItem("identifier",JSON.stringify(r.data.data)),j(w("/webgradsidvphone"))):(r.data.error=="USERALREADYEXIST"&&(o(!0),l(r.data.message)),r.data.error==="PHONEUNAUTHORIZED"&&confirm(r.data.message)&&(sessionStorage.setItem("identifier",JSON.stringify(i)),location.href=w("/webgradsidvphone")),r.data.paramErrors&&(r.data.paramErrors.find(t=>t.field==="username")&&(p(!0),f(r.data.message)),r.data.paramErrors.find(t=>t.field==="email")&&(o(!0),l(r.data.message)),r.data.paramErrors.find(t=>t.field==="password")&&(d(!0),h(r.data.message))))})};return e.jsxs(Z.Fragment,{children:[e.jsx(J,{}),e.jsxs(n,{sx:G,children:[e.jsxs(n,{children:[e.jsxs(L,{variant:"h3",sx:K,children:["회원가입 정보를",e.jsx("br",{}),"입력해주세요."]}),e.jsx(C,{fullWidth:!0,label:"이름",variant:"outlined",color:"warning",margin:"normal",type:"name",onChange:a=>S(a.target.value),error:u,helperText:u?b:""}),e.jsx(C,{fullWidth:!0,label:"이메일",variant:"outlined",color:"warning",margin:"normal",type:"email",onChange:a=>{v(a.target.value),o(!1)},error:g,helperText:g?F:""}),e.jsxs(Y,{variant:"outlined",fullWidth:!0,margin:"normal",children:[e.jsx(q,{htmlFor:"password",color:"warning",children:"비밀번호"}),e.jsx(Q,{color:"warning",id:"password",type:"password",label:"비밀번호",onChange:a=>{I(a.target.value),d(!1)},onFocus:()=>E(!0),onBlur:()=>E(!1),error:R})]}),T&&e.jsxs(N,{sx:{maxWidth:"280px",position:"absolute",zIndex:"10"},children:[e.jsx(A,{sx:{backgroundColor:"#2EAC74",color:"white",fontSize:"13px",textAlign:"left"},children:"최소 8자 이상, 소문자, 대문자, 특수문자 반드시 포함"}),e.jsx(A,{children:e.jsx(_,{style:{fontSize:"14px",textAlign:"left",backgroundColor:"transparent"},rules:["minLength","lowercase","capital","number","specialChar"],minLength:8,value:x,messages:{minLength:"비밀번호 길이",lowercase:"소문자",capital:"대문자",number:"숫자",specialChar:"특수문자"},iconComponents:{ValidIcon:e.jsx(H,{sx:{color:"#2EAC74"}}),InvalidIcon:e.jsx(V,{sx:{color:"#2EAC74"}})},onChange:a=>{y(a)}})})]})]}),e.jsx(n,{children:e.jsx(n,{children:e.jsx($,{fullWidth:!0,size:"large",onClick:()=>O(),color:"warning",variant:"contained",sx:X,children:"다음"})})})]})]})};export{pe as default};
