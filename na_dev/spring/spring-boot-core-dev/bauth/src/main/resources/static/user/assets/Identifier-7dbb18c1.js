import{j as e,B as K,L as m,u as z,a as V,b as J,g as p,r as a,c as l,i,$ as h,S as b,T as I,d as o}from"./index-98646e71.js";import{m as W,b as q}from"./authStyle-a2596f0d.js";import{N as H}from"./logo-01c3e038.js";import{w as Q}from"./Webauthn-6593b58b.js";import{F as X}from"./FormControlLabel-9c2bd6e9.js";import{C as Y}from"./Checkbox-54e16ad0.js";import"./validateUtil-0f34513f.js";import"./useFormControl-5ac6dc89.js";const Z="/assets/email-icon-6b9dbf94.svg",_="/assets/pin-icon-03380bc5.svg",ee="/assets/kakao-icon-484d1a1d.svg",te="/assets/naver-icon-6665b332.svg",se="/assets/google-icon-14ea3c83.svg",oe="/assets/finger-icon-332a2980.svg",n=g=>e.jsx(K,{size:"large",variant:"outlined",color:"warning",component:m,...g,children:g.children}),ue=()=>{const g=z(),{Confirm:S}=V(),{Alert:u}=J(),x=p("clientId"),[c,k]=a.useState(),[C,U]=a.useState(H),[f,j]=a.useState(""),[v,w]=a.useState(null),[E,y]=a.useState(null),[N,B]=a.useState(null),[L,A]=a.useState(null),[F,M]=a.useState(null);a.useEffect(()=>{O()},[]);const O=()=>{const t=p("error");t==="USERNOTFOUND"&&u({message:`등록 된 유저정보 가 없습니다.
        소셜 로그인을 사용하시려면
        먼저 이메일로 로그인 후
        소셜 로그인 등록 페이지에서
        등록해주시기 바랍니다.`,onClose:()=>location.replace(l("/identifier"))}),t==="FORBIDDEN"&&u({message:`해당 소셜 계정에 등록된
        사용자가 너무 많습니다.
        소셜 로그인 이용이 불가합니다 
        관리자에게 문의해주세요.
        서비스를 이용하시려면 
        이메일 로그인을 이용해 주세요.`,onClose:()=>location.replace(l("/identifier"))})};async function P(){await h.get(`/public/api/client/redirect-info?clientId=${x}`).then(t=>{const s=t.data.data;if(t.data.error!="OK"){u(t.data.message);return}s!=null&&(console.log(s),k(s),i(s.logoUri)||R(s.logoUri))})}async function R(t){await h.get(`/public/api/get-image?imagename=${t}`).then(s=>{i(s)||(console.log(s),i(s.data)||U(`data:image/*;base64,${s.data}`))})}a.useEffect(()=>{i(x)||P()},[]);function d(t){let s="/public/api/social/login/"+t;if(i(t)){console.log("parameter social is null");return}f!=""&&(s+="?rememberMe=on"),console.log(s),location.href=s}function T(){S({message:"간편인증 정보가 없습니다. 등록하시겠습니까?",yesText:"예",noText:"아니오",onConfirm:()=>{g("/user/auth/webgradsidvphonesocial",{state:"webauthn"})}})}const $=()=>{console.log(c.baseUrl+c.homeUri),location.href=c.baseUrl+c.homeUri};a.useEffect(()=>{D()},[]);const D=async()=>{let s=(await h.get("/cmm/config/login")).data.data,r=JSON.parse(s.configValue);w(r.email),y(r.webauthn),B(r.kakao),A(r.naver),M(r.google)},G=t=>{t.target!=null&&(t.target.checked?j(t.target.value):j(""))};return e.jsxs(b,{sx:W,children:[e.jsx(I,{variant:"h1",sx:{marginBlock:0,marginBottom:"5px",display:"flex",width:200,height:200,fontSize:0,alignItems:"center"},children:e.jsx("img",{src:C,alt:"Logo Image",width:"100%"})}),e.jsxs(b,{sx:q,children:[v?e.jsxs(n,{component:m,to:l("/identifierByEmail"),children:[e.jsx(o,{children:e.jsx("img",{src:Z,alt:"Email Icon"})}),e.jsx(o,{children:"이메일 로그인"})]}):"",E?e.jsxs(n,{onClick:()=>Q(T,f),children:[e.jsx(o,{children:e.jsx("img",{src:_,alt:"Pin Icon"})}),e.jsx(o,{children:"간편인증 로그인"})]}):"",N?e.jsxs(n,{onClick:()=>d("kakao"),children:[e.jsx(o,{children:e.jsx("img",{src:ee,alt:"Kakao Icon"})}),e.jsx(o,{children:"카카오 로그인"})]}):"",L?e.jsxs(n,{onClick:()=>d("naver"),children:[e.jsx(o,{children:e.jsx("img",{src:te,alt:"Naver Icon"})}),e.jsx(o,{children:"네이버 로그인"})]}):"",F?e.jsxs(n,{onClick:()=>d("google"),children:[e.jsx(o,{children:e.jsx("img",{src:se,alt:"Google Icon"})}),e.jsx(o,{children:"구글 로그인"})]}):"",e.jsxs(n,{component:m,to:l("/WebCreateAccount"),children:[e.jsx(o,{children:e.jsx("img",{src:oe,alt:"Account Icon"})}),e.jsx(o,{children:"회원가입"})]}),e.jsx(n,{component:m,to:l("/sample"),children:"UI 공통 샘플페이지"}),!i(c)&&!i(c.homeUri)&&e.jsx(n,{onClick:$,children:"돌아가기"}),e.jsx(X,{control:e.jsx(Y,{sx:{width:25,height:25},onChange:t=>G(t)}),label:e.jsx(I,{sx:{fontSize:"12px"},children:"자동 로그인"}),labelPlacement:"start",sx:{margin:"0 auto 0 0"}})]})]})};export{ue as default};
