import{b as E,u as v,r as s,j as e,d as o,T as p,L as C,c as S,B as T,i as P,$ as D,e as k}from"./index-98646e71.js";import{A as y}from"./AppBarGoBack-afc912f2.js";import{c as A,t as B,a as L}from"./authStyle-a2596f0d.js";import{T as h}from"./TextField-214db1cb.js";import{F as O}from"./FormControlLabel-9c2bd6e9.js";import{C as R}from"./Checkbox-54e16ad0.js";import"./OutlinedInput-0b5b8429.js";import"./useFormControl-5ac6dc89.js";const F="비밀번호를 확인 해 주세요.",U=()=>{const{Alert:d}=E();v();const x=sessionStorage.getItem("identifier")||"{}",n=JSON.parse(x).email,[i,f]=s.useState(""),[m,c]=s.useState(""),[g,l]=s.useState(!0),[b,j]=s.useState(!1),u=a=>{if(a.preventDefault(),!i){l(!1);return}const r=new FormData;r.append("email",n),r.append("password",i),P(m)||r.append("remember-me",m),D.post("/login",r,{isSkipError:!0}).then(t=>{t.data.error==="OK"?(localStorage.setItem("email",n),k("webauthnEmail"),t.data.data.authorities[0]&&t.data.data.authorities[0].authority=="ROLE_PRE_AUTH"?d("challengeTotp 로 이동 TODO"):location.href=t.data.data.targetUrl):l(!1)}).catch(t=>{l(!1),t.response.data.error==="LOCKED"&&d(`로그인 불가 안내
해당 계정은 퇴사 처리되었습니다.
로그인하시려면 관리자에게 문의해 주세요.`),t.response.data.error==="BADCREDENTIAL"&&j(!0)})},w=a=>{a.target!=null&&(a.target.checked?c(a.target.value):c(""))};return e.jsxs(e.Fragment,{children:[e.jsx(y,{}),e.jsxs(o,{sx:A,children:[e.jsxs(o,{children:[e.jsxs(p,{variant:"h3",sx:B,children:["비밀번호를 ",e.jsx("br",{}),"입력해 주세요."]}),e.jsx(h,{fullWidth:!0,label:n,variant:"outlined",color:"warning",margin:"normal",disabled:!0}),e.jsx(h,{fullWidth:!0,label:"비밀번호",variant:"outlined",color:"warning",margin:"normal",type:"password",helperText:!g&&F,value:i,onChange:a=>f(a.target.value),onKeyDown:a=>a.key==="Enter"&&u(a)}),!!b&&e.jsx(C,{to:S("/findPassword"),children:"비밀번호를 잊으셨나요?"}),e.jsx("br",{}),e.jsx(O,{control:e.jsx(R,{sx:{width:25,height:25},onChange:a=>w(a)}),label:e.jsx(p,{sx:{fontSize:"12px"},children:"자동 로그인"}),labelPlacement:"start",sx:{margin:0}})]}),e.jsx(o,{children:e.jsx(o,{children:e.jsx(T,{fullWidth:!0,variant:"contained",size:"large",color:"warning",sx:L,onClick:u,children:"확인"})})})]})]})};export{U as default};
