import{j as s,C as E,r as u,g as V,b as B,c as l,d as i,T as I,B as R,$ as _}from"./index-98646e71.js";import{A as k}from"./AppBarGoBack-afc912f2.js";import{c as M,t as O,a as W}from"./authStyle-a2596f0d.js";import{R as y,d as z,a as D}from"./index-5bf7952a.js";import{C as w}from"./CardContent-acb39d1a.js";import{F as g,I as C,O as j,f as H}from"./OutlinedInput-0b5b8429.js";import"./useFormControl-5ac6dc89.js";const S=({passwordValue:e,setPasswordState:o})=>s.jsxs(E,{sx:{maxWidth:"280px",position:"absolute",zIndex:"10"},children:[s.jsx(w,{sx:{backgroundColor:"#2EAC74",color:"white",fontSize:"13px",textAlign:"left"},children:"최소 8자 이상, 소문자, 대문자, 특수문자 반드시 포함"}),s.jsx(w,{children:s.jsx(y,{style:{fontSize:"14px",textAlign:"left",backgroundColor:"transparent"},rules:["minLength","lowercase","capital","number","specialChar"],minLength:8,value:e,messages:{minLength:"비밀번호 길이",lowercase:"소문자",capital:"대문자",number:"숫자",specialChar:"특수문자"},iconComponents:{ValidIcon:s.jsx(z,{sx:{color:"#2EAC74"}}),InvalidIcon:s.jsx(D,{sx:{color:"#2EAC74"}})},onChange:r=>o(t=>({...t,isValid:r}))})})]}),P={value:"",isValid:!1,onFocused:!1},v="비밀번호가 일치하지 않습니다.",L="비밀번호를 확인 해 주세요.",K=()=>{const[e,o]=u.useState({...P}),[r,t]=u.useState({...P}),d=V("email"),{Alert:c,AlertError:p}=B();u.useEffect(()=>{F()},[]);const F=()=>{if(d===null){p({message:`잘못된 경로로 접근 하였습니다. 
        로그인 화면으로 이동합니다.`,onClose:()=>location.replace(l("/identifier"))});return}},m=(a,n)=>{n(b=>({...b,value:a}))},x=a=>{a(n=>({...n,onFocused:!0}))},f=a=>{a(n=>({...n,onFocused:!1}))},h={isPasswordSameMessage:function(){return this.isPasswordSame()?"":v},isPasswordSame:function(){return e.value&&r.value?e.value===r.value:!0},all:function(){return this.isPasswordSame()?!e.isValid&&!r.isValid?(c(L),!1):!0:(c(v),!1)}},A=()=>{if(!h.all()||d===null)return;const a=new FormData;a.append("email",d),a.append("password",e.value),_.post("/public/api/auth/resetPassword",a,{isSkipError:!0}).then(()=>c({message:"비밀번호가 변경되었습니다.",onClose:()=>location.replace(l("/identifier"))})).catch(()=>p({message:"비밀번호 변경 실패했습니다",onClose:()=>location.replace(l("/findPassword"))}))};return s.jsxs(s.Fragment,{children:[s.jsx(k,{movePage:()=>location.replace(l("/identifier"))}),s.jsxs(i,{sx:M,children:[s.jsxs(i,{children:[s.jsxs(I,{variant:"h3",sx:O,children:["변경할 비밀번호를",s.jsx("br",{}),"입력해주세요."]}),s.jsxs(g,{variant:"outlined",fullWidth:!0,margin:"normal",children:[s.jsx(C,{htmlFor:"password",color:"warning",children:"변경 비밀번호"}),s.jsx(j,{color:"warning",id:"password",type:"password",label:"변경 비밀번호",onChange:a=>m(a.target.value,o),onFocus:()=>x(o),onBlur:()=>f(o),error:!!e.value&&!e.isValid})]}),e.onFocused&&s.jsx(S,{passwordValue:e.value,setPasswordState:o}),s.jsxs(g,{variant:"outlined",fullWidth:!0,margin:"normal",children:[s.jsx(C,{htmlFor:"passwordConfirm",color:"warning",children:"비밀번호 확인"}),s.jsx(j,{color:"warning",id:"passwordConfirm",type:"password",label:"비밀번호 확인",onChange:a=>m(a.target.value,t),onFocus:()=>x(t),onBlur:()=>f(t),error:!!r.value&&!r.isValid})]}),s.jsx(H,{error:!0,children:h.isPasswordSameMessage()}),r.onFocused&&s.jsx(S,{passwordValue:r.value,setPasswordState:t})]}),s.jsx(i,{children:s.jsx(i,{children:s.jsx(R,{fullWidth:!0,size:"large",onClick:A,color:"warning",variant:"contained",sx:W,children:"비밀번호 변경"})})})]})]})};export{K as default};
